<html>
<head>
<title>Wallifornia Musictech postcard</title>
<link href="//cloudinary.com/stylesheets/g/cloudinary_public.css?1498587043" media="screen" rel="stylesheet" type="text/css" />
<style>
body { margin: 10px; text-align: center; }
img { max-width: 100%; }
</style>
</head>
<body>

<h1>Make a postcard from Wallifornia Musictech</h1>

<p>
<a href="#" id="upload_widget_opener" class="cloudinary-button">Upload an image to create a postcard!</a>
</p>

<form>
<input type="text" id="postcard_text" name="postcard_text" value="Greetings from Wallifornia!" size="50"><br>
<input type="radio" name="postcard_effect" value="photo" id="e2" checked> Default style
<input type="radio" name="postcard_effect" value="cartoonify" id="e1"> Cartoonify style
<a href="#" id="update_text" class="cloudinary-button">Update</a>
</form>

<div id="result_postcard" style="display: none">
<img src="" id="postcard_image" alt="Your Wallifornia Musictech postcard!">
<form>
URL: <input type="text" id="image_url" name="image_url" value="" size="80" readonly onclick="this.select();">
</form>
</div>

<div style="font-size: small">
Powered by <a href="https://cloudinary.com"><img src="https://res.cloudinary.com/webspeedtest/image/asset/cloudinary_logo_text.svg" style="max-height:2em; max-width:8em; vertical-align: bottom;"></a>
</div>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//widget.cloudinary.com/global/all.js" type="text/javascript"></script>
<script type="text/javascript">
 var image_id;
 function show_image() {
        var effect = 'w_400,h_400,g_auto:faces,c_fill,e_improve/e_vignette/u_WMT_bg,w_800,g_center,x_-150/l_WMT_logo,g_west,w_250,x_30';
        if (document.getElementById("e1").checked) {
            effect = 'w_800,h_450,g_auto:faces,c_fill,e_cartoonify/u_WMT_bg,w_800,e_screen,o_70/l_WMT_logo,g_south_west,w_150,x_10,y_10';
        }
        var image_url = 'https://res.cloudinary.com/jon/'
        + effect
        + 'l_cld_logo,g_south_east,e_outline:2:200,co_black,w_100'
        + '/g_north,y_10,co_white,bo_2px_solid_black,l_text:Pacifico_60_stroke:'
        + encodeURIComponent(document.getElementById("postcard_text").value)
        + '/f_auto,q_auto/'
        + image_id;
        document.getElementById("postcard_image").src = image_url;
        document.getElementById("image_url").value = image_url;
        document.getElementById("result_postcard").style.display = "block";
 }
 document.getElementById("update_text").addEventListener("click", function() {
    show_image();
 }, false);
 document.getElementById("upload_widget_opener").addEventListener("click", function() {
    cloudinary.openUploadWidget({ cloud_name: 'jon', upload_preset: 'hackathon', multiple: 'false'},
      function(error, result) {
        console.log(error, result);
        image_id = result[0].public_id;
        show_image();
    });
  }, false);
</script>


</body>
</html>